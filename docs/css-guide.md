# CSS 设计指南

## Sass

### 1. 不要滥用嵌套

尽量避免使用嵌套，Sass 嵌套被滥用一个原因可能是通过嵌套来定义命名空间，因为嵌套使代码可读性变得复杂，而且同样会影响样式规则的优先级。可以通过更加语意化的命名规则避免嵌套的产生。

推荐以下更加理性的嵌套使用方式：

* 伪类或伪元素

* 元素本身的其他选择器

* 外部选择器导致该元素本身发生变化

* 针对该元素的媒体查询规则

总之，能够使该元素本身发生变化的选择器才能被嵌套。

### 2. 不要通过 `&` 拼接选择器：`&-selector`

通过 `&` 来拼接选择器确实能够为我们书写带来便利；但是，当我们想在源代码里查找某一个选择器的时候会很难找到。你可以想象一下，如果在深层嵌套下使用这种方式会带来什么后果。

所以，应该通过更加语义化的书写来避免这种情况。

### 3. 不要过度使用 Extend

过度使用 @extend 会导致编译后的代码变的很难看。比如 `%clearfix` 被引用 20 次，那么编译结果可是 20 个选择器共享一套规则。

### 4. 不要定义无参数的 Mixins

无参数的 Mixins 意味着每次调用的时候都会引用重复的代码，这样会导致我们的 CSS 脚本体积无意义的增大；比如一个 Mixins 块有 5 行，在不同的地方总共引用 10 次，那么将会有 50 行重复的代码。 这种情况应该考虑使用 `extend`。

### 5. 不要手写厂商前缀

厂商前缀会随着时间的推移而被替代掉，所以手写添加厂商前缀会给维护上带来困难，应该通过使用 `Autoprefixer` 来进行处理。

### 6. 编码顺序：

`局部变量 --> @extend --> @include --> 普通的 CSS 规则 --> 嵌套的伪类／伪元素 --> 其他嵌套规则`

例如：

```
  .selector {
    $error-text-color: red;
    @extend %absolute-center;
    @include size(30px, 16px);
    backgroud-color: green;
    box-sizing: border-box;
    ...
    &:hover {
      box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3);
    }
    &::before {
      content: '';
      display: block;
    }
    ...
  }
```

### 6. 依赖导入应该从大到小顺序导入

即依赖导入顺序应该按 `框架 --> 工具／插件 --> 全局模块 --> 局部模块` 引入。

### 7. Sass 模块尽可能的保持功能的单一

不要一个模块包含所有样式规则，尽可能的进行拆分。文件太多可以通过 `Glob` 方式导入。

### 8. 关键部分要记得写注释

### 9. 组件样式

组件样式文件应该与组件模版文件拆开独立，某一个组件如果有多个 Sass 模块，则统一放在 `styles` 目录下，通过 `index.scss` 引入其他模块。如果该组件只有一个 Sass 模块，则命名为 `style.scss`，并存放于该组件的根目录。

## 指南参考

* [maintainablecss](https://maintainablecss.com/)
* [css guidelines](https://cssguidelin.es/)
* [sass guidelines](https://sass-guidelin.es/)
